# Claude Code Project Rules
# These rules apply to all code modifications and new file creation in this project

## Single Responsibility Principle (SRP)

**CRITICAL: Always follow the Single Responsibility Principle when creating or modifying files.**

### File Organization Rules:

1. **Each file should have ONE clear responsibility**
   - If a file handles multiple concerns, split it into separate files
   - Module names should clearly indicate their single purpose

2. **File Size Guidelines:**
   - If a file exceeds 800 lines, evaluate if it should be split
   - If a file exceeds 1100 lines, it MUST be refactored into smaller modules
   - Exception: Generated files or configuration files

3. **Module Separation Examples:**
   - ✅ GOOD: `color-analyzer.js` (handles ONLY color analysis)
   - ✅ GOOD: `mobile-lighthouse-analyzer.js` (handles ONLY mobile usability checks)
   - ❌ BAD: `utils.js` (vague, handles multiple unrelated utilities)
   - ❌ BAD: A single file that handles both data fetching AND UI rendering

4. **When to Split a File:**
   - File has multiple distinct sections with different purposes
   - File handles multiple unrelated data transformations
   - File contains both business logic AND presentation logic
   - File has grown beyond 800 lines and handles more than one concern

5. **How to Split:**
   - Extract each responsibility into its own module
   - Use clear, descriptive names that indicate the single purpose
   - Create a coordinator/orchestrator file if needed to combine modules
   - Update imports/exports to maintain functionality

### Current Project Structure:

This extension follows SRP with modules like:
- `color-analyzer.js` - Color conversion, contrast, WCAG compliance
- `content-script-helpers.js` - DOM helpers, section/block detection, color scanning
- `content-script-analyzers.js` - Element analysis (buttons, headings, paragraphs, links, images)
- `content-script-mobile-checks.js` - Mobile-specific checks
- `mobile-lighthouse-analyzer.js` - Lighthouse-based mobile usability analysis
- `sqs-style-analyzer-main.js` - Main coordinator that orchestrates all analyzers

**When modifying or creating files, maintain this level of separation and clarity.**

### Before Making Changes:

1. Read the existing file structure
2. Identify if the change belongs in an existing module
3. If creating new functionality, create a new module with a clear single purpose
4. If a file is getting too large, propose splitting it before adding more code

## Additional Coding Standards

### File Headers:
- Include a comment at the top of each file describing its single responsibility
- List dependencies if applicable

### Exports:
- Use clear, descriptive names for exported functions/objects
- Group related exports together
- Document the public API

### Testing Considerations:
- SRP makes files easier to test in isolation
- Each module should be independently testable
